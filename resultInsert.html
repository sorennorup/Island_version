<!DOCTYPE html>
<html>  
    
    <head>
        <meta charset="UTF-8">
         <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <script src = "src/jquery.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
        <script src =" https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/bluebird/3.3.5/bluebird.min.js"></script>-->
        <script src = "src/loadCounter.js"></script>
        <script src = "src/Reset.js"></script>
        <script src = "src/InputControl.js"></script>
        <script src = "src/Question.js"></script>
        <script src = "src/Profile.js"></script>
        <script src = "src/PrintToPdf.js"></script>
        <script src = "src/Result.js"></script>
        <script src = "src/QuestionsDataModel.js"></script>
        <script src = "src/Label.js"></script>
        <script src = "src/EventsControl.js"></script>
       
        <link rel="stylesheet" type="text/css" href="style.css">
    
    </head>
    
        <body id = "print-body">
            
            <div class = "container">
                <div class = "row">
                    
                    <div class = "col-lg-7">
                     
                <h1>Erhvervsparathed </h1>
                   
               <p id = "intro-message"></p>
                <button id = 'profileid_1' class = "btn profile-menu-item" value = 1>Unge</button>
                <button id = 'profileid_2' class = "btn profile-menu-item" value = 2>Mål</button>
                <button id = 'profileid_3' class = "btn profile-menu-item" value = 3>Vejleder</button>
              <script>
              
                
                
              </script>   
                
             <!---   Start the form    --> 
        <form class = "my-form" id = "question-form" style = "" action= "measure.html">
           
            <table width = "200px" class = "table-hover" id = "question"> <!-- Start table -->
           
            <tr>
                <th  style = "font-size:20px; " align = "left" id = "labelsView">
                Du kan nu indtaste resultaterne manuelt 0 - 5 med 1 decimal (eks 1.4) <br/>
                <a href = "index.html"><- Return to questions</a></th>
    
            </tr>
     
    <script>
            // Init dataobjects
             var data = new Result(id,1);
             var data2 = new Result(id,1);
             var data3 = new Result(id,2);
             var data5  = new Result(id,3);
              
            // Make the profilelinks active 
             event_control.adClickedToButton();
             event_control.addListenerToProfileLink();
                         
            // Create the profile for the questions// Profile array is containing all the questions of the profile
             var profile2 = new Profile(profile_array[1],'Mål', 2, labelsarray);
             var profile = new Profile(profile_array[0],'Unge',1,labelsarray);
             var profile3 = new Profile(profile_array[2],'Vejleder',3,labelsarray);

             // get the stored result for the Chart
             var storedResults = profile.getResults(); 
             var storedResults2 = profile2.getResults();
             var storedResults3 = profile3.getResults();
             var profile_id = sessionStorage.profileid;
               
           
    </script>
    
                
            </table>   <!-- End the table -->

         </form> <!-- End of the form -->
         <div class="panel">
                    <div class="panel-heading">Resultater <span id = "profilename"></span></div>
                    <div class="panel-body">
                        <form action = "resultInsert.html"><table  id = "resultView"> </table>
                    
                    <input id = "manual-sub"  class = "btn btn-succes"type = "submit" value= "Gem indtastning" />
                    </form>
                    </div>
                </div>    
    </div>
                    
                    <div class = "col-lg-5">
           

           
             <div id = "for-print">
                <div id = "result-container">
                   
                  <div id = "profilename"></div>
                                  
                   <button class = "btn" id = 'download-pdf'>Download til PDF</button> 
                 <div id = chartContainer>
                        <hr/> 
                 <canvas id = "myChart"> </canvas>
                  
              </div>
                 </div>
                </div> <!-- End col -->
                 
             </div> <!-- End row -->
            
                  </div> <!-- End container -->
               
          <script>
            document.getElementById('manual-sub').addEventListener('click', function(){
            
            switch(sessionStorage.profileid){
                
                case '1':   
                data2.setManualData(); 
                break;
                
                case '2':
                data3.setManualData();
                break;
                
                case '3':
                data5.setManualData();
                 
                }
                
            });
             
          switch(profile_id){
                // If profile id is empty then create a intro tekst
                case undefined:
                document.getElementById("intro-message").innerHTML = "Klik på en profil for at starte";
                          break;
                        // Load the questions of the 1. profile
            case '1':
                document.getElementById('profilename').innerHTML = profile.get_profile_name();
                break;
            case '2':
                document.getElementById('profilename').innerHTML = profile2.get_profile_name();
                break;
            case '3':
                document.getElementById('profilename').innerHTML = profile3.get_profile_name();
               
             }
            var labels = new Label();
            let view = document.getElementById("labelsView");
            var labelsarr = labels.setLabels(view);

          
           document.getElementById('resultView').innerHTML = labelsarr+data.setResultViewIds();  
               
               switch(sessionStorage.profileid){
                case '1': data2.insertResultDirect();
                          break;
                case '2': data3.insertResultDirect();
                          break;
                case '3': data5.insertResultDirect();
               }
                /*****Add eventlisteners to the inputfield*****/
              
             // Only allow digitis 0 - 4 
             let input_control = new InputControl();
             // Check for browser IE11
             var isIE11 = !!window.MSInputMethodContext && !!document.documentMode;
             var score_field = document.getElementsByClassName("score");
            
             for(var i = 0; i< score_field.length; i++){
                
                 score_field[i].addEventListener('keydown',input_control.CheckNumberManual);
                 score_field[i].addEventListener('keyup',input_control.CheckNumberManual);
                  score_field[i].addEventListener('focus', input_control.emptyFieldOnFocus);
                  score_field[i].addEventListener('focus', input_control.SetSelected);
                 
                 if(!isIE11){
                    //Use the function if the browser is not IE11
                 score_field[i].addEventListener('focus', input_control.emptyFieldOnFocus);
                 
                 }
                 
                 score_field[i].addEventListener('focusout',input_control.unDoHeighlight);
                 
             }
                var chosenField = document.getElementsByClassName("next");
             
             for(var i = 0; i< chosenField.length; i++){
                
                 chosenField[i].addEventListener('mouseover',input_control.heiglightChosenField);
                 chosenField[i].addEventListener('mouseout',input_control.unDoHeighlight);
                 
             }
            /*****End Add eventlisteners to the inputfield*****/
            
               let navigationObj = $('.clickevent');
               event_control.clickableLabels(navigationObj);
              
                
        var ctx = document.getElementById('myChart').getContext('2d');
              let PDF = new PrintToPdf(storedResults,storedResults2,storedResults3,labelsarray);
           //event_control.clickableLabels();
           document.getElementById('download-pdf').addEventListener("click", PDF.downloadResultsOnly);
          
            
            
          </script>
                 
          <script>

        var chart = new Chart(ctx, {
    // The type of chart we want to create
            type: 'radar',

    // The data for our dataset
   				
            data: {
                labels: labelsarray,
                datasets: [{
                label:profile.get_profile_name() ,
               backgroundColor: 'rgba(255,255, 255,0.0)',
                borderColor: '#333',
                data: storedResults,
                borderWidth: 10
            },
       
            { 
                label:profile2.get_profile_name() ,
                backgroundColor: 'rgba(255, 255, 255,0.0)',
                borderColor: '#333',
                data: storedResults2,
                borderWidth: 2
               

           },
           { 
                label:profile3.get_profile_name() ,
                backgroundColor: 'rgba(255, 255, 255,0.0)',
                borderColor: '#000',
                data: storedResults3,
                
                 borderDash: [10,5]

           } 
        ],   
    },
        // Configuration options go here
        options: {
                scale: {
                ticks: {
        beginAtZero: true,
        max: 5,
            
        },
        pointLabels: {
                fontSize: 13,
  },
    },
        maintainAspectRatio: false,
                 
     }
});  
    
            </script>
          
           <script>
        
           document.getElementById('download-pdf').addEventListener("click", PDF.downloadPDF);
            
           </script>
                </div>
            </div>

        
     <footer>
       
                    <div class = " container logos">
                         <hr/> 
                       <!-- <div class="row">
                           
                          <div class = "col-sm-3"></div>
                          
                            <div class = " bottom-margin col-sm-2 mb-5"><img class = "img-responsive" src = "logoer/Erasmus-250x59.png" width = "220"  /> </div>
                           

                            <div class = " bottom-margin col-sm-3 mb-5"><p>Udarbejdet af Moeve og UU DANMARK</p> <a rel="license" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png" /></a><br />This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License</a>. </div>

                          
                            <div class = " bottom-margin col-sm-1 mb-5"><img class = "img-responsive" src = "logoer/YIT-fin-clean-2.png" width = "240"  /> </div>
                           <div class = "col-sm-3"></div>
                        </div> -->
                        
                    </div>
                    
                    
                 </footer>
<script type="text/javascript" src="pdfmake-master/build/pdfmake.min.js"></script>
<script type="text/javascript" src="pdfmake-master/build/vfs_fonts.js"></script>
        </body>
</html>